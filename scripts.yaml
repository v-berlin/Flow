# Flow - Increase Goal
flow_increase_goal:
  alias: "Flow - Increase Goal"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.flow_daily_goal
      data:
        value: "{{ [states('input_number.flow_daily_goal') | int + 5, 1440] | min }}"

# Flow - Decrease Goal
flow_decrease_goal:
  alias: "Flow - Decrease Goal"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.flow_daily_goal
      data:
        value: "{{ [states('input_number.flow_daily_goal') | int - 5, 0] | max }}"

# Flow - Reset Day
flow_reset_day:
  alias: "Flow - Reset Day"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.flow_time_tracked_today
      data:
        value: 0
    - service: input_boolean.turn_off
      target:
        entity_id:
          - input_boolean.flow_timer_active
          - input_boolean.flow_cat_work
          - input_boolean.flow_cat_personal
          - input_boolean.flow_cat_coding
          - input_boolean.flow_cat_design
          - input_boolean.flow_cat_engineering
    - service: input_text.set_value
      target:
        entity_id: input_text.flow_active_category
      data:
        value: "None"
    - service: persistent_notification.create
      data:
        title: "ðŸ”„ Reset"
        message: "Day has been reset"

# Flow - Manual Add Time
flow_add_time:
  alias: "Flow - Add Time Manually"
  mode: single
  fields:
    minutes:
      description: "Minutes to add"
      example: 30
      required: true
      selector:
        number:
          min: 1
          max: 480
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.flow_time_tracked_today
      data:
        value: "{{ [states('input_number.flow_time_tracked_today') | int + minutes, 1440] | min }}"
    - service: persistent_notification.create
      data:
        title: "âž• Time Added"
        message: "{{ minutes }} minutes were manually added"
