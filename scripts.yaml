# Motive - Increase Goal
motive_increase_goal:
  alias: "Motive - Increase Goal"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.motive_daily_goal
      data:
        value: "{{ [states('input_number.motive_daily_goal') | int + 5, 1440] | min }}"

# Motive - Decrease Goal
motive_decrease_goal:
  alias: "Motive - Decrease Goal"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.motive_daily_goal
      data:
        value: "{{ [states('input_number.motive_daily_goal') | int - 5, 0] | max }}"

# Motive - Reset Day
motive_reset_day:
  alias: "Motive - Reset Day"
  mode: single
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.motive_time_tracked_today
      data:
        value: 0
    - service: input_boolean.turn_off
      target:
        entity_id:
          - input_boolean.motive_timer_active
          - input_boolean.motive_cat_work
          - input_boolean.motive_cat_privat
          - input_boolean.motive_cat_coding
          - input_boolean.motive_cat_design
          - input_boolean.motive_cat_engineering
    - service: input_text.set_value
      target:
        entity_id: input_text.motive_active_category
      data:
        value: "Keine"
    - service: persistent_notification.create
      data:
        title: "üîÑ Reset"
        message: "Tag wurde zur√ºckgesetzt"

# Motive - Manual Add Time (Optional - f√ºgt manuell Zeit hinzu)
motive_add_time:
  alias: "Motive - Add Time Manually"
  mode: single
  fields:
    minutes:
      description: "Minuten die hinzugef√ºgt werden sollen"
      example: 30
      required: true
      selector:
        number:
          min: 1
          max: 480
  sequence:
    - service: input_number.set_value
      target:
        entity_id: input_number.motive_time_tracked_today
      data:
        value: "{{ [states('input_number.motive_time_tracked_today') | int + minutes, 1440] | min }}"
    - service: persistent_notification.create
      data:
        title: "‚ûï Zeit hinzugef√ºgt"
        message: "{{ minutes }} Minuten wurden manuell hinzugef√ºgt"

# Motive - Test Timer (Optional - f√ºr Tests)
motive_test_timer:
  alias: "Motive - Test Timer"
  mode: single
  sequence:
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.motive_timer_start
      data:
        datetime: "{{ now() - timedelta(minutes=5) }}"
    - delay:
        seconds: 1
    - variables:
        start: "{{ states('input_datetime.motive_timer_start') }}"
        elapsed: "{{ ((as_timestamp(now()) - as_timestamp(start)) / 60) | int }}"
    - service: persistent_notification.create
      data:
        title: "‚ö° Test Info"
        message: |
          Start: {{ start }}
          Vergangen: {{ elapsed }} Minuten
          Aktuell getrackt: {{ states('input_number.motive_time_tracked_today') }} min
